var liga = angular.module('liga', ['ui.router']);

liga.config(['$stateProvider', function($stateProvider){
    $stateProvider
    .state('home', {
        url: '',
        templateUrl:'views/home.html'
    })
    .state('all_penguins', {
        url: '/all_ping',
        templateUrl:'views/all_ping.html',
        controller:'usersCtrl'
    })
    .state('penguin_day', {
        url: '/today_ping',
        templateUrl:'views/today_ping.html'
    })
    .state('form', {
        url: '/form',
        templateUrl:'views/form.html',
        controller:'formCtrl'
    })
}])
angular.module('liga')
.controller ('usersCtrl', ['$http', usersCtrl]);

function usersCtrl($http){
    var vm = this;
    vm.users = "penguins";
    // vm.data = [];
    $http.get("https://jsonplaceholder.typicode.com/users")
        .then(function (response) {
            vm.data = response.data;
            console.log(vm.data);
            return vm.data;
            
    });
}

function UsersService ($http){

    var vm = this;
    $http.get("https://jsonplaceholder.typicode.com/users")
      .then(function (response) {
        vm.data = response.data;
        console.log('hi');  
        return vm.data;        
      });  
}


angular
    .module('liga')
    .service('UsersService', ['$http', UsersService]);


angular.module('liga')
.controller ('formCtrl', ['FormService', formCtrl]);

function formCtrl(FormService){
    var vm = this;
    
    vm.comments = [
        {
            name: "Annie",
            favourite: "Great penguins",
            comment: "I love penguins"
        },
        {
            name: "Pavlo",
            favourite: "Little penguins",
            comment: "Penguins are cute"
        }
    ];

vm.data = {};
vm.data.name = "";
vm.data.favourite = "";
vm.data.comment = "";

vm.add = function(newComment) {
    this.newComment = {
        name: vm.data.name,
        favourite: vm.data.favourite,
        comment: vm.data.comment
    };
       
    var newComment =  this.newComment;
    console.log(newComment);
    return newComment;
    
}
    
}
angular.module('liga')
    .factory('FormService', [formService])

    
    function formService(){
        var form = {};
        formService.comments = formCtrl.comments;
        form.getComments = function(){
        // return comments;
        }

        form.addComment = function(comment){
            form.getComments().add(comment);
        }
        
        return form;
    }

angular.
module('liga').
component('emails', {
    template:
      '<ul>' +
        '<li ng-repeat="user in $ctrl.data">' +
          '<span>{{user.email}}</span>' +
        '</li>' +
      '</ul>',
    controller: function emailsCtrl($http) {
      var vm = this;
      $http.get("https://jsonplaceholder.typicode.com/users")
        .then(function (response) {
          vm.data = response.data;
          return vm.data;          
        });  
    }
});